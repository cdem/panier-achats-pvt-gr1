{"version":3,"sources":["SommairePanier.jsx","Entete.jsx","Pied2Page.jsx","BtnAjoutPanier.jsx","Produit.jsx","ListeProduits.jsx","Accueil.jsx","Apropos.jsx","Contact.jsx","Page.jsx","hooks/useLocalStorageState.js","index.jsx"],"names":["SommairePanier","props","etatPanier","panier","infoPanier","pan","info","articles","Object","values","nbArticles","length","qteArticles","reduce","valInit","valCourante","qte","sousTotal","accumulateur","articleCourant","prix","st","toFixed","tps","tvq","total","retournerInfoPanier","className","cacher","Entete","useState","cacheSommaire","setCacheSommaire","to","activeClassName","exact","Badge","onClick","badgeContent","eltCourant","color","Pied2Page","annee","Date","getFullYear","BtnAjoutPanier","texte","couleur","Produit","id","nom","setPanier","btnTexte","btnQte","btnCouleurCls","src","alt","JSON","parse","stringify","instanceFirebase","apps","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","ListeProduits","tabProduits","map","prd","Accueil","Apropos","Contact","Page","valeurInitiale","etiquetteLS","window","localStorage","getItem","etat","setEtat","useEffect","setItem","useLocalStorageState","path","component","baseName","location","href","search","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"6yBAEe,SAASA,EAAeC,GAAO,kBAEhBA,EAAMC,WAFU,GAErCC,EAFqC,KAGtCC,GAHsC,KAgB9C,SAA6BC,GAC3B,IAAIC,EAAO,GAGPC,EAAWC,OAAOC,OAAOJ,GAG7BC,EAAKI,WAAaH,EAASI,OAW3BL,EAAKM,YAAcL,EAASM,QAAO,SAASC,EAASC,GACnD,OAAOA,EAAYC,IAAMF,IACxB,GAGH,IAAIG,EAAYV,EAASM,QAAO,SAACK,EAAcC,GAAf,OAAkCA,EAAeC,KAAKD,EAAeH,IAAME,IAAc,GACzHZ,EAAKe,GAAKJ,EAAUK,QAAQ,GAG5B,IAAIC,EAAkB,IAAZN,EACVX,EAAKiB,IAAMA,EAAID,QAAQ,GAEvB,IAAIE,EAAkB,OAAZP,EAKV,OAJAX,EAAKkB,IAAMA,EAAIF,QAAQ,GAEvBhB,EAAKmB,OAASR,EAAYM,EAAMC,GAAKF,QAAQ,GAEtChB,EAhDYoB,CAAoBvB,IACvC,OACE,sBAAKwB,UAAW,kBAAoB1B,EAAM2B,OAAO,UAAU,IAA3D,UACE,uBAAMD,UAAU,aAAhB,sCAAoDvB,EAAWM,cAC/D,uBAAMiB,UAAU,cAAhB,8BAAgDvB,EAAWQ,eAC3D,uBAAMe,UAAU,YAAhB,0BAA0CvB,EAAWiB,MACrD,uBAAMM,UAAU,MAAhB,mBAA6BvB,EAAWmB,OACxC,uBAAMI,UAAU,MAAhB,mBAA6BvB,EAAWoB,OACxC,uBAAMG,UAAU,QAAhB,qBAAiCvB,EAAWqB,YCNnC,SAASI,EAAO5B,GAAQ,IAAD,EACM6B,oBAAS,GADf,mBAC7BC,EAD6B,KACdC,EADc,KAK7B7B,EAL6B,YAKnBF,EAAMC,WALa,MAMpC,OACE,yBAAQyB,UAAU,SAAlB,UACE,8BAAK,cAAC,IAAD,CAASM,GAAG,IAAIC,gBAAgB,YAAYC,OAAK,EAAjD,oBACL,qBAAIR,UAAU,gBAAd,UACE,6BAAI,cAAC,IAAD,CAASM,GAAG,gBAAgBC,gBAAgB,YAA5C,wBACJ,6BAAI,cAAC,IAAD,CAASD,GAAG,uBAAuBC,gBAAgB,YAAnD,gCACJ,6BAAI,cAAC,IAAD,CAASD,GAAG,WAAWC,gBAAgB,YAAvC,iCAEN,qBAAIP,UAAU,UAAd,UACE,+BACE,cAACS,EAAA,EAAD,CAAOC,QAbiB,kBAAML,GAAkBD,IAaRO,aAAc9B,OAAOC,OAAON,GAAQU,QAAQ,SAACK,EAAcqB,GAAf,OAA+BrB,EAAeqB,EAAWvB,MAAK,GAAIwB,MAAM,UAA5J,SACE,cAAC,IAAD,MAEF,cAAC,EAAD,CAAgBZ,OAAQG,EAAe7B,WAAYD,EAAMC,gBAE3D,kD,MC1BO,SAASuC,EAAUxC,GAE9B,IAAMyC,GAAS,IAAIC,MAAQC,cAE3B,OACI,2CACYF,K,YCHL,SAASG,EAAT,GAAyD,IAAhC7B,EAA+B,EAA/BA,IAAKqB,EAA0B,EAA1BA,QAASS,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,QAC3D,OACE,cAACX,EAAA,EAAD,CAAOE,aAActB,EAAKwB,MAAM,YAAhC,SACE,wBACEH,QAASA,EACTV,UAAS,yBAAoBoB,GAF/B,SAIGD,M,2BCRM,SAASE,EAAT,GAA+C,IAA7B9C,EAA4B,EAA5BA,WAAY+C,EAAgB,EAAhBA,GAAIC,EAAY,EAAZA,IAAK9B,EAAO,EAAPA,KAAO,cAE7BlB,EAF6B,GAElDC,EAFkD,KAE1CgD,EAF0C,KAyBzD,IAAIC,EAAW,oBACXC,EAAS,EACTC,EAAgB,GAOpB,OANGnD,EAAO8C,KACNG,EAAW,cAAC,IAAD,IACXC,EAASlD,EAAO8C,GAAIjC,IACpBsC,EAAgB,SAIlB,qBAAI3B,UAAU,UAAd,UACE,qBAAKA,UAAU,QAAf,SACE,qBAAK4B,IAAK,mBAAqBN,EAAK,QAASO,IAAKN,MAEpD,sBAAKvB,UAAU,OAAf,UACE,6BAAKuB,IACL,oBAAGvB,UAAU,OAAb,UAAqBP,EAArB,UACA,cAAC,EAAD,CACEiB,QApCR,WACOlC,EAAO8C,GAEN9C,EAAO8C,GAAIjC,MAIXb,EAAO8C,GAAM,CAAC7B,KAAMA,EAAMJ,IAAK,GAInCmC,EAAUM,KAAKC,MAAMD,KAAKE,UAAUxD,MA0BhC2C,MAAOM,EACPpC,IAAKqC,EACLN,QAASO,U,0BC7BjBM,IAAiBC,KAAKlD,QACxBiD,IAAiBE,cAbI,CACrBC,OAAQ,0CACRC,WAAY,sCACZC,YAAa,0DACbC,UAAW,sBACXC,cAAe,kCACfC,kBAAmB,gBACnBC,MAAO,6CACPC,cAAe,iBASNV,IAAiBW,UA0BbC,MApBf,SAAuBvE,GAErB,OACE,sBAAK0B,UAAU,gBAAf,UACE,sDACA,6BACG8C,EAAYC,KAAI,SAACC,GAAD,OACf,cAAC,EAAD,CAEEzE,WAAYD,EAAMC,WAClB+C,GAAI0B,EAAI1B,GACRC,IAAKyB,EAAIzB,IACT9B,KAAMuD,EAAIvD,MAJLuD,EAAI1B,a,WCxCN,SAAS2B,IACtB,OACE,sBAAKjD,UAAU,UAAf,UACE,yCACA,kECJS,SAASkD,IACtB,OACE,sBAAKlD,UAAU,UAAf,UACE,qDACA,kDCJS,SAASmD,IACtB,OACE,sBAAKnD,UAAU,UAAf,UACE,gDACA,wECMS,SAASoD,EAAK9E,GAG3B,IAAMC,ECHO,SAA8B8E,EAAgBC,GAAc,IAAD,EAChDnD,oBACtB,kBAAM2B,KAAKC,MAAMwB,OAAOC,aAAaC,QAAQH,KAAiBD,KAFQ,mBACjEK,EADiE,KAC3DC,EAD2D,KAWxE,OANAC,qBACE,kBAAML,OAAOC,aAAaK,QAAQP,EAAaxB,KAAKE,UAAU0B,MAC9D,CAACA,EAAMJ,IAIF,CAACI,EAAMC,GDRKG,CAAqB,GAAI,kBAqB5C,OACE,sBAAK9D,UAAU,OAAf,UACE,cAAC,EAAD,CAAQzB,WAAYA,IACpB,yBAASyB,UAAU,mBAAnB,SAEE,eAAC,IAAD,WAEE,cAAC,IAAD,CAAO+D,KAAK,IAAIC,UAAWf,EAASzC,OAAK,IACzC,cAAC,IAAD,CAAOuD,KAAK,gBAAgBvD,OAAK,EAAjC,SACE,cAAC,EAAD,CAAejC,WAAYA,MAE7B,cAAC,IAAD,CAAOwF,KAAK,uBAAuBvD,OAAK,EAAxC,SACE,cAAC0C,EAAD,MAEF,cAAC,IAAD,CAAOa,KAAK,WAAWvD,OAAK,EAA5B,SACE,cAAC2C,EAAD,WAKN,cAAC,EAAD,OEhDN,IAAMc,GAA4D,IAAhDV,OAAOW,SAASC,KAAKC,OAAO,eAAyB,yBAA2B,GAElGC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAQC,SAAUP,EAAlB,SACE,cAAC,EAAD,QAGJQ,SAASC,eAAe,a","file":"static/js/main.0fa57fa3.chunk.js","sourcesContent":["import './SommairePanier.scss';\r\n\r\nexport default function SommairePanier(props) {\r\n  //console.log(\"Etat du panier dans SommairePanier : \", props.etatPanier);\r\n  const [panier, setPanier] = props.etatPanier;\r\n  const infoPanier = retournerInfoPanier(panier);\r\n  return (\r\n    <div className={'SommairePanier' + (props.cacher?' cacher':'')}>\r\n      <span className=\"nbArticles\">Articles différents : {infoPanier.nbArticles}</span>\r\n      <span className=\"qteArticles\">Articles total : {infoPanier.qteArticles}</span>\r\n      <span className=\"sousTotal\">Sous-total : {infoPanier.st}</span>\r\n      <span className=\"tps\">TPS : {infoPanier.tps}</span>\r\n      <span className=\"tvq\">TVQ : {infoPanier.tvq}</span>\r\n      <span className=\"total\">Total : {infoPanier.total}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction retournerInfoPanier(pan) {\r\n  let info = {}; // {nbArticles: 2, qteArticles: 18, sousTotal: 1234.87,}\r\n\r\n  // Sortir les articles et les mettre dans un tableau\r\n  let articles = Object.values(pan);\r\n\r\n  // Nombre d'articles différents\r\n  info.nbArticles = articles.length;\r\n\r\n  // Quantité d'articles totale\r\n  // Première façon :\r\n  // let qteTotale = 0;\r\n  // for(let i=0; i<articles.length; i++) {\r\n  //   qteTotale += articles[i].qte;\r\n  // }\r\n  // info.qteArticles = qteTotale;\r\n\r\n  // Meilleure façon :\r\n  info.qteArticles = articles.reduce(function(valInit, valCourante) {\r\n    return valCourante.qte + valInit;\r\n  }, 0);\r\n\r\n  // Sous-total\r\n  let sousTotal = articles.reduce((accumulateur, articleCourant) => articleCourant.prix*articleCourant.qte + accumulateur, 0);\r\n  info.st = sousTotal.toFixed(2);\r\n\r\n  // TPS \r\n  let tps = sousTotal * 0.05;\r\n  info.tps = tps.toFixed(2);\r\n\r\n  let tvq = sousTotal * 0.09975;\r\n  info.tvq = tvq.toFixed(2);\r\n\r\n  info.total = (sousTotal + tps + tvq).toFixed(2);\r\n\r\n  return info;\r\n}","import './Entete.scss';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport SommairePanier from './SommairePanier';\r\nimport { useState } from 'react';\r\nimport { Link, NavLink } from 'react-router-dom';\r\n\r\nexport default function Entete(props) {\r\n  const [cacheSommaire, setCacheSommaire] = useState(true);\r\n  \r\n  const basculerSommairePanier =  () => setCacheSommaire(!cacheSommaire);\r\n  \r\n  const [panier] = props.etatPanier;\r\n  return (\r\n    <header className=\"Entete\"> \r\n      <div><NavLink to=\"/\" activeClassName=\"navActive\" exact>Logo</NavLink></div>\r\n      <ul className=\"navPrincipale\">\r\n        <li><NavLink to=\"/nos-produits\" activeClassName=\"navActive\">Produits</NavLink></li>\r\n        <li><NavLink to=\"/a-propos-de-magasin\" activeClassName=\"navActive\">A propos de nous</NavLink></li>\r\n        <li><NavLink to=\"/contact\" activeClassName=\"navActive\">Contactez-nous</NavLink></li>\r\n      </ul>\r\n      <ul className=\"navUtil\">\r\n        <li>\r\n          <Badge onClick={basculerSommairePanier} badgeContent={Object.values(panier).reduce( (accumulateur, eltCourant)  => accumulateur + eltCourant.qte, 0)} color=\"primary\">\r\n            <ShoppingCartIcon />\r\n          </Badge>\r\n          <SommairePanier cacher={cacheSommaire} etatPanier={props.etatPanier} />\r\n        </li>\r\n        <li>Mon compte</li>\r\n      </ul>\r\n    </header>\r\n  );\r\n}","import './Pied2Page.scss';\r\n\r\nexport default function Pied2Page(props) {\r\n    // Obtenir l'année courante\r\n    const annee = (new Date()).getFullYear();\r\n\r\n    return (\r\n        <footer>\r\n            &copy; {annee}\r\n        </footer>\r\n    );\r\n}","import \"./BtnAjoutPanier.scss\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nexport default function BtnAjoutPanier({qte, onClick, texte, couleur}) {\r\n  return (\r\n    <Badge badgeContent={qte} color=\"secondary\">\r\n      <button\r\n        onClick={onClick}\r\n        className={`BtnAjoutPanier ${couleur}`}\r\n      >\r\n        {texte}\r\n      </button>\r\n    </Badge>\r\n  );\r\n}\r\n","import BtnAjoutPanier from './BtnAjoutPanier';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport './Produit.scss';\r\n\r\nexport default function Produit({etatPanier, id, nom, prix}) {\r\n    //console.log(\"Panier dans Produit : \", props.etatPanier);\r\n    const [panier, setPanier] = etatPanier;\r\n\r\n    /**\r\n     * Ajoute l'article au panier\r\n     */\r\n    function ajouterArticle() {\r\n        if(panier[id]) {\r\n            //setPanier();\r\n            panier[id].qte++;\r\n        }\r\n        else {\r\n            //setPanier();\r\n            panier[id] = {prix: prix, qte: 1}\r\n        }\r\n        // Maintenant il faut changer l'état du panier avec setPanier\r\n        // Il faut passer à setPanier un NOUVEL objet (obtenu par clonage)\r\n        setPanier(JSON.parse(JSON.stringify(panier))); // {...panier} // Spread operator\r\n        //const nouveauPanier = Object.assign({}, panier);\r\n        //setPanier(nouveauPanier); \r\n        //console.log(\"Clone obtenu avec assign() : \", nouveauPanier);\r\n    }\r\n\r\n    // État du bouton\r\n    let btnTexte = \"Ajouter au panier\";\r\n    let btnQte = 0;\r\n    let btnCouleurCls = \"\";\r\n    if(panier[id]) {\r\n        btnTexte = <AddCircleOutlineIcon/>; //JSX ; Javascript Syntax eXtension\r\n        btnQte = panier[id].qte;\r\n        btnCouleurCls = \"rouge\";\r\n    }\r\n\r\n    return (\r\n      <li className=\"Produit\">\r\n        <div className=\"image\">\r\n          <img src={\"images-produits/\" + id + \".webp\"} alt={nom} />\r\n        </div>\r\n        <div className=\"info\">\r\n          <h3>{nom}</h3>\r\n          <p className=\"prix\">{prix} $CA</p>\r\n          <BtnAjoutPanier\r\n            onClick={ajouterArticle}\r\n            texte={btnTexte}\r\n            qte={btnQte}\r\n            couleur={btnCouleurCls}\r\n          />\r\n        </div>\r\n      </li>\r\n    );\r\n}","import \"./ListeProduits.scss\";\r\nimport Produit from \"./Produit\";\r\nimport tabProduits from \"./data/produits.json\";\r\nimport instanceFirebase from 'firebase/app';\r\nimport \"firebase/firestore\";\r\n\r\n// Code pour intégrer Firebase temporairement placé ici\r\n\r\n// Configuration du projet FB\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBAB1bpsWFNArALnECEKBRvNvkucnWE3eA\",\r\n  authDomain: \"panier-achats-react.firebaseapp.com\",\r\n  databaseURL: \"https://panier-achats-react-default-rtdb.firebaseio.com\",\r\n  projectId: \"panier-achats-react\",\r\n  storageBucket: \"panier-achats-react.appspot.com\",\r\n  messagingSenderId: \"1061179620791\",\r\n  appId: \"1:1061179620791:web:d61b330e1cda1a773d7c32\",\r\n  measurementId: \"G-MHHR9EPPGB\"\r\n};\r\n\r\n// Obtenir une instance de l'API Firebase\r\nif(!instanceFirebase.apps.length) {\r\n  instanceFirebase.initializeApp(firebaseConfig);\r\n}\r\n\r\n// Obtenir une instance de la BD Firestore.\r\nconst bd = instanceFirebase.firestore;\r\n\r\n// AJAX et donc Promise et donc Async (à compléter au prochain cours)\r\n// let mesProduits =  bd.collection(\"produits\").get();\r\n\r\n\r\nfunction ListeProduits(props) {\r\n  //console.log(\"Panier dans ListeProduits\", props.etatPanier);\r\n  return (\r\n    <div className=\"ListeProduits\">\r\n      <h2>Produits disponibles</h2>\r\n      <ul>\r\n        {tabProduits.map((prd) => (\r\n          <Produit\r\n            key={prd.id}\r\n            etatPanier={props.etatPanier}\r\n            id={prd.id}\r\n            nom={prd.nom}\r\n            prix={prd.prix}\r\n          />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ListeProduits;\r\n","export default function Accueil() {\r\n  return (\r\n    <div className=\"Accueil\">\r\n      <h2>Magasin</h2>\r\n      <p>Page d'accueil en construction</p>\r\n    </div>\r\n  );\r\n}\r\n\r\n","export default function Apropos() {\r\n  return (\r\n    <div className=\"Apropos\">\r\n      <h2>À propos de nous</h2>\r\n      <p>Bla bla bla...</p>\r\n    </div>\r\n  );\r\n}\r\n\r\n","export default function Contact() {\r\n  return (\r\n    <div className=\"Contact\">\r\n      <h2>Contactez-nous</h2>\r\n      <p>Formulaire de contact à venir ...</p>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import './Page.scss';\r\nimport Entete from './Entete';\r\nimport Pied2Page from './Pied2Page';\r\nimport ListeProduits from './ListeProduits';\r\nimport useLocalStorageState from './hooks/useLocalStorageState';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Accueil from './Accueil';\r\nimport Apropos from './Apropos';\r\nimport Contact from './Contact';\r\n\r\nexport default function Page(props) {\r\n  // On utilise notre hook personnalisé pour créer un état qui sera sauvegardé dans localStorage\r\n  // Cet état aura comme valeur initiale : {} et l'étidquette localStorage sera : \"panier-pvt-gr1\"\r\n  const etatPanier = useLocalStorageState({}, \"panier-pvt-gr1\");\r\n\r\n  // Autre exemples d'utilisation : \r\n  // const etatConnexion = useLocalStorageState(false, \"utilisateur-connexion\");\r\n  // const choixLangue = useLocalStorageState(\"fr\", \"choix-langue\");\r\n\r\n  // // Remarquez l'initialisation \"paresseuse\" (lazy initialization) de l'état \r\n  // const etatPanier = useState(() => {\r\n  //   const panierLS = window.localStorage.getItem('panier-pvt-gr1'); // NOOB!\r\n  //   return (panierLS !== null) ? JSON.parse(panierLS) : {};\r\n  // }); \r\n  // const [panier, setPanier] = etatPanier;\r\n\r\n  // // Sauvegarder le panier dans localStorage \r\n  // // Comme ce code est un effet secondaire de votre composant \r\n  // // (qui doit être exécuté à chaque mutation du panier) la bonne façon de \r\n  // // le coder en respectant la manière React est d'utiliser un hook spécialisé \"useEffect\"\r\n  // useEffect(() => {\r\n  //   window.localStorage.setItem('panier-pvt-gr1', JSON.stringify(panier))\r\n  // }, [panier]); // tableau des deps (dépendances)\r\n\r\n  return (\r\n    <div className=\"Page\">\r\n      <Entete etatPanier={etatPanier} />\r\n      <section className=\"contenuPrincipal\">\r\n        {/* Switch permet d'inclure les composants requis selon l'URL dans le lien */}\r\n        <Switch>\r\n          {/* Route match (apparie) chaque URL avec un lien et inclut le composant corerspondant */}\r\n          <Route path=\"/\" component={Accueil} exact />\r\n          <Route path=\"/nos-produits\" exact>\r\n            <ListeProduits etatPanier={etatPanier} />\r\n          </Route>\r\n          <Route path=\"/a-propos-de-magasin\" exact>\r\n            <Apropos />\r\n          </Route>\r\n          <Route path=\"/contact\" exact>\r\n            <Contact />\r\n          </Route>\r\n        </Switch>\r\n\r\n      </section>\r\n      <Pied2Page />\r\n    </div>\r\n  );\r\n}","import { useEffect, useState } from 'react';\r\n\r\n/**\r\n * Obtient un état React qui sera sauvegardé dans localStorage\r\n * \r\n * @param {*} valeurInitiale valeur quelconque avec laquelle on veut initialiser l'état\r\n * @param {string} etiquetteLS chaîne de caractère pour l'étiquette localStorage\r\n * \r\n * @returns {array} tableau retourné par useState\r\n */\r\nexport default function useLocalStorageState(valeurInitiale, etiquetteLS) {\r\n  const [etat, setEtat] = useState(\r\n    () => JSON.parse(window.localStorage.getItem(etiquetteLS)) || valeurInitiale\r\n  );\r\n\r\n  useEffect(\r\n    () => window.localStorage.setItem(etiquetteLS, JSON.stringify(etat)),\r\n    [etat, etiquetteLS]\r\n  );\r\n\r\n  // Retourner l'état\r\n  return [etat, setEtat];\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport './index.scss';\r\nimport Page from './Page';\r\n\r\nconst baseName = (window.location.href.search(/github\\.io/i) !== -1) ? \"/panier-achats-pvt-gr1\" : \"\" ;\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router basename={baseName}>\r\n      <Page />\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('racine')\r\n);\r\n"],"sourceRoot":""}